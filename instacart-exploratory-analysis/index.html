<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Neal A. Akyildirim - Data Scientist -</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/blog-post.css" rel="stylesheet">

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">Neal A. Akyildirim -Data Scientist - </a>
      <!--<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
        </ul>
      </div> -->
    </div>
  </nav>

  <!-- Page Content -->
  <div class="container">

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-12">

        <!-- Title -->
        <h1 class="mt-4">Instacart Market Basket Analysis </h1>

        <!-- Author -->
        <p class="lead">
          
          <!--<a href="#">Start Bootstrap</a> -->
        </p>

        <hr>

        <!-- Date/Time -->
        <p>Posted on Feburary 6, 2020</p>

        <hr>

        <!-- Preview Image -->
        <img class="img-fluid rounded" src="../img/instacart.jpg" alt="instacart image">

        <hr>

        <!-- Post Content -->
        <h2> Introduction </h2>
        <p class="lead">Formulating possible business problem statements without domain expert or a business stakeholder.</p>

        <p>Instacart is a same-day delivery and pick up service that allows consumers to shop through the company’s mobile app or website from selected grocery stores, such as Trader Joe’s, Costco and Fairway. The company has dedicated employees who shop groceries from the selected stores and deliver to the consumers’ doorsteps. The way the company generates revenue is by adding markup on prices for specific stores, delivery and membership fee. Hence, the main business objective for the organization is to, not only increase the number of customer memberships but also improve the repeat visit and orders. Predicting consumer engagement and behavior with the products and grocery stores have a huge impact on Instacart’s success.</p>

        <p>The main purpose of this analysis is to perform an exploratory analysis and formulate incremental business problems to increase revenue. In order to do that, we will rely on historical data provided by Instacart. Further information about this publicly released dataset can be found here: https://www.instacart.com/datasets/grocery-shopping-2017</p>

        <h2>About the Data</h2>

        <p>The dataset is provided by Instacart for a Kaggle Competition, which are relational set of files describing customers’ orders over time. The dataset is anonymized and contains a sample of over 3 million grocery orders from more than 200,000 Instacart users. For each user, the dataset provides between 4 and 100 of their orders, with the sequence of products purchased in each order. The dataset also provides the week and hour of day the order was placed and relative measure of time between orders.</p>

        <p>The description of each variable is outlined below;</p>

        <p>orders dataset: order_id: order identifier, user_id: customer identifier, eval_set: which evaluation set this order belongs in (see train and prior dataset described below), order_number: the order sequence number for this user (1 = first, n = nth), order_dow: the day of the week the order was placed on, order_hour_of_day: the hour of the day the order was placed on, days_since_prior: days since the last order, capped at 30 (with NAs for order_number = 1)</p>

        <p>products dataset: product_id: product identifier, product_name: name of the product, aisle_id: foreign key, department_id: foreign key</p>

        <p>aisles dataset: aisle_id: aisle identifier, aisle: the name of the aisle</p>

        <p>departments dataset: department_id: department identifier, department: the name of the department</p>

        <p>order_products_prior and train datasets: order_id: foreign key, product_id: foreign key, add_to_cart_order: order in which each product was added to cart, reordered: 1 if this product has been ordered by this user in the past, 0 otherwise, “prior”: orders prior to that users most recent order, “train”: training data supplied to participants of the competition, “test”: test data reserved for machine learning competition</p>

        <h2>Data Collection and Cleaning</h2>

        <p>Ideally, prior to the data collection phase, we would have liked to define the data requirements based on problem statement in order to collect the needed data. However, we are executing a different approach in this case, where we really don't know what problems instacart business have and we want to formulate problems with the available data. This is completely different from a data science project process perspective, where we usually want to outline business understanding with the domain experts and stakeholders as a first step and further define collection methods, data collecting, cleaning and exploratory analysis. Let’s start with importing our packages, load each data set and take a brief look at them.</p>

        <img class="img-fluid rounded" src="img/code1.jpg" alt="code1 image">

        <img class="img-fluid rounded" src="img/code2.jpg" alt="code2 image">

        <img class="img-fluid rounded" src="img/code3.jpg" alt="code3 image">

        <img class="img-fluid rounded" src="img/code4.jpg" alt="code4 image">

        <img class="img-fluid rounded" src="img/code5.jpg" alt="code4 image">



        <!--<blockquote class="blockquote">
          <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
          <footer class="blockquote-footer">Someone famous in
            <cite title="Source Title">Source Title</cite>
          </footer>
        </blockquote> -->

        <p>We have around 50,000 products with product id, name, aisle id and department id. All data types are as expected and we don't have any missing values.</p>

        <img class="img-fluid rounded" src="img/code6.jpg" alt="code5 image">



        <p>There are 134 aisles with aisle id and aisle name. The data types are as expected and we don't have any missing values. As you may notice, aisle_id variable is a common variable with products dataframe. We can merge these two dataframes to see what products belong to what aisle.</p>

        <img class="img-fluid rounded" src="img/code7.jpg" alt="code7 image">

        <p>There is a total of 21 departments with department names and ids. The data types are as expected and we don't have any missing values. We have another common variable “department_id” with products dataframe. We can merge the departments dataframe to see what product belongs to which department.</p>

        <img class="img-fluid rounded" src="img/code8.jpg" alt="code8 image">

        <p>As explained in the variable descriptions, order products prior data set gives us the insights on the orders that are ordered prior to users most recent order. We have over 3 million of these orders. The data types are correct and there are no missing values. We also have product_id common variable where we can merge this dataset with products to see what product maps to what order.</p>

        <img class="img-fluid rounded" src="img/code9.jpg" alt="code9 image">

        <p>We have been provided over 1.3 million training data, with correct data types and no missing values. At this point, the data sets provided by instacart seems to be pretty clean and besides merging aisles, departments, products and orders data sets, we didn't need to do much of data wrangling.</p>

        <h2>Data Exploration</h2>

        <p>At this stage, we will look at the updated version of the data set individually, and gather insights to start creating possible business problems.</p>

        <img class="img-fluid rounded" src="img/code10.jpg" alt="code10 image">

        <img class="img-fluid rounded" src="img/code11.jpg" alt="code11 image">

        <p>What we are seeing here is that 23986 customers made only 4 orders, 19590 customers only made 5 orders and so on… As the number of orders made by customers goes up, the number of customers that makes those orders goes down. Majority of the customers make 4 to 12 orders. If a business finds a way to increase the number of orders from repeat customers, it can increase the revenue.</p>

        <img class="img-fluid rounded" src="img/code12.jpg" alt="code12 image">

        <img class="img-fluid rounded" src="img/code13.jpg" alt="code13 image">

        <p>Majority of the purchases are being made on Monday and Tuesday followed by Sunday. Consumers might be making their weekly grocery shopping at the first and second day of the week. There isn't a huge gap between the other days of the week either. For example, the difference between Wednesday and Tuesday is not that significant.</p>

        <img class="img-fluid rounded" src="img/code14.jpg" alt="code14 image">

        <p>Majority of the purchases are made between 10am to 4pm.</p>

        <img class="img-fluid rounded" src="img/code15.jpg" alt="code15 image">

        <img class="img-fluid rounded" src="img/code16.jpg" alt="code16 image">

        <p>Majority of the customers do their purchases weekly and monthly. Considering the fact that majority of the customers also place their orders Monday or Tuesday of the week, placing an order might require planning effort. There is a slight chance this might be due to a non seamless ordering process.</p>

        <img class="img-fluid rounded" src="img/code17.jpg" alt="code17 image">

        <img class="img-fluid rounded" src="img/code18.jpg" alt="code18 image">

        <p>We can see that, based on the basket size distribution, the majority of the customers purchased 5 to 6 products per order. Considering the low amount of orders from repeat customers, low product amount per customer can be a huge problem for the business in terms of revenue.</p>

        <img class="img-fluid rounded" src="img/code19.jpg" alt="code19 image">

        <img class="img-fluid rounded" src="img/code20.jpg" alt="code20 image">

        <img class="img-fluid rounded" src="img/code21.jpg" alt="code21 image">

        <img class="img-fluid rounded" src="img/code22.jpg" alt="code22 image">

        <img class="img-fluid rounded" src="img/code23.jpg" alt="code23 image">

        <p>Top ten reordered items match exactly to the top ten items ordered in general. Additionally, most of the items on top ten purchases are in the fresh fruits aisle.</p>

        <img class="img-fluid rounded" src="img/code24.jpg" alt="code24 image">

        <img class="img-fluid rounded" src="img/code25.jpg" alt="code25 image">

        <p>Top aisles are fresh fruits, fresh vegetables, packaged vegetables and fruit, followed by yogurt and packaged cheese.</p>

        <img class="img-fluid rounded" src="img/code26.jpg" alt="code26 image">
        <img class="img-fluid rounded" src="img/code27.jpg" alt="code27 image">

        <p>As we figured out earlier, the highest percentage of orders and the highest basket size is Monday and Tuesday.</p>

        <img class="img-fluid rounded" src="img/code28.jpg" alt="code28 image">
        <img class="img-fluid rounded" src="img/code29.jpg" alt="code29 image">

        <p>As we found out earlier, the highest ordered products are Banana, Bag of Organic Bananas, Organic Baby Spinach and Organic Strawberries. Interesting insight here is that, out of the top 4 products, Banana has the most proportion of orders in a day for every but the other four top products do not have any contribution to the proportion of orders on Wednesday, Thursday, Friday, Saturday and Sunday. Can this be related to an item inventory issue?</p>

        <img class="img-fluid rounded" src="img/code30.jpg" alt="code30 image">
        <img class="img-fluid rounded" src="img/code31.jpg" alt="code31 image">

        <p>The top department is produce, followed by dairy eggs and snacks. Addition to the general individual preference and needs, there might be other reasons why consumers are not purchasing from other departments. For example, if instacart has the biggest mark up for canned goods, but the user experience within the instacart website or app does not entice the consumer for canned goods, regardless of the consumer needs the order amount on canned goods will be low.</p>

        <p>The datasets are quite big and have many variables that we can analyze. Similar to what we have at our earlier learning associations article, we can further look at association rules in detail between products (even though unstacking and converting the existing large dataset to a transactional data set would be challenging), investigate consumer reordering patterns in terms of days and hours, reorder ratio vs the hour of the order and so on…</p>

        <h2>Conclusion</h2>

        <p>Looking at a variety of data science processes and methodologies, you will realize almost all of them have a similar approach, which starts with business understanding, outlining a business problem statement to validate and solve. However, we might run into situations where the domain expert, brand owner, business unit or stakeholder may not necessarily know or have the time to figure out what the business problem is. In most of these cases, they are looking at the product manager to identify, formulate the business problems and provide tangible recommendations to solve them.</p>

        <p>In our instacart analysis, we can summarize possible business problems that might have an impact on revenue are;</p>

        <li>Frequency of customer orders is low ranging from 4–12. What actions can a business take in order the improve the frequency of customer orders?</li>
        <li>Majority of the customers planning their purchases as weekly and monthly cycles. What actions can a business take to improve the purchases for any day of the week and month? As an example; Amazon made their entire ordering product and process very seamlessly that I personally do not extensively plan my grocery purchases. If I need a product from Amazon, I order that day.</li>
        <li>Besides banana, top items are sold mostly on Monday and Tuesday. Can this be related to an item inventory issue from the retailers? For example; would it be possible Trader Joe’s runs out of organic strawberries by Wednesday, and instacart employee substitutes that order with a regular strawberry based on customer request?</li>
        <li>Besides the general consumer and market needs, are there any reasons why certain department sales are lower than the others? (such as instacart website or mobile app usability issues)</li>
        <br></br>


        <p>Formulating and defining business problem statements is extremely important to find the right solution for business goals. In my earlier article on linear regression, I mentioned how problematic it is for some statisticians to start with data analysis without creating a problem statement, however, there are many cases where stakeholders expect data to drive and formulate these problem statements.</p>

        <hr>

        <!-- Comments Form -->
        <!--<div class="card my-4">
          <h5 class="card-header">Leave a Comment:</h5>
          <div class="card-body">
            <form>
              <div class="form-group">
                <textarea class="form-control" rows="3"></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div>

        <!-- Single Comment -->
        <!--<div class="media mb-4">
          <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
          <div class="media-body">
            <h5 class="mt-0">Commenter Name</h5>
            Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
          </div>
        </div>

        <!-- Comment with nested comments -->
        <!--<div class="media mb-4">
          <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
          <div class="media-body">
            <h5 class="mt-0">Commenter Name</h5>
            Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.

            <div class="media mt-4">
              <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
              <div class="media-body">
                <h5 class="mt-0">Commenter Name</h5>
                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
              </div>
            </div>

            <div class="media mt-4">
              <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
              <div class="media-body">
                <h5 class="mt-0">Commenter Name</h5>
                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
              </div>
            </div>

          </div>
        </div>

      </div>

      <!-- Sidebar Widgets Column -->
      <!--<div class="col-md-4">

        <!-- Search Widget -->
        <!--<div class="card my-4">
          <h5 class="card-header">Search</h5>
          <div class="card-body">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for...">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button">Go!</button>
              </span>
            </div>
          </div>
        </div>

        <!-- Categories Widget -->
        <!--<div class="card my-4">
          <h5 class="card-header">Categories</h5>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">Web Design</a>
                  </li>
                  <li>
                    <a href="#">HTML</a>
                  </li>
                  <li>
                    <a href="#">Freebies</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">JavaScript</a>
                  </li>
                  <li>
                    <a href="#">CSS</a>
                  </li>
                  <li>
                    <a href="#">Tutorials</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Side Widget -->
        <!--<div class="card my-4">
          <h5 class="card-header">Side Widget</h5>
          <div class="card-body">
            You can put anything you want inside of these side widgets. They are easy to use, and feature the new Bootstrap 4 card containers!
          </div>
        </div>-->

      </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Your Website 2019</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>
